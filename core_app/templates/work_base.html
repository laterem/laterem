{% extends 'base.html' %}
{% load laterem %}

{% block left-side %}
    {% if student_tree %}
        {{ student_tree }}
    {% else %}
        {% with tree_title="Доступные работы" %}
            {% tree "workdir" %}
        {% endwith %}
    {% endif %}
{% endblock %}

{% block content %}
<form method="post" id="answer-form">
    {% csrf_token %}
    {{ work_name }}
    <br/>
    {% if task.name %}
        Задача: {{task.name}}
        <br/>
    {% endif %}
    <div style="text-align: left;">
        {% include task.template_path %}
        <button type="submit" class="button">Проверить</button>
    </div>
    <script>
        $(document).on('submit', '#answer-form', function(e){
            // e.preventDefault();
    
            var new_data = $("#answer-form").serializeArray();
    
            var student_tree = $("#menu").html();
    
            new_data.push({name: "zhur", value: "is the best"});
            new_data.push({name: 'student_tree', value: student_tree});
    
            // console.log(jQuery.param(new_data));
    
            $.ajax({
                type: 'POST',
                url: '/',
                beforeSend: function(){
                    console.log("Send");
                    new_data.push({name: "zhur", value: "is the best"});
                    console.log(jQuery.param(new_data));
                },
                data: new_data
            })
        });
    </script>
</form>
{% endblock %}
{% block foot %}
    {% with button_list_items=task_list %}
        {% include "button_list.html" %}
    {% endwith %}
{% endblock %}
{% block right-side %}
    <form method="post" style="height: 100%;">
        {% csrf_token %}
        <button type="submit" name="redirect:task{{next_task}}" id="right-side" class="button"><span></span></button>         
    </form>
{% endblock %}